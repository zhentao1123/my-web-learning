<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>

    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>storage</title>

    <link rel="stylesheet" type="text/css" href="css/base-style.css"/>
    <script src="js/jquery-3.2.1.js"></script>
    <script src="js/base-js.js"></script>

    <style type="text/css">

    </style>

    <script type="text/javascript">

    </script>

</head>

<body>

<div class="root-container">

    <div class="center"><h2>Storage Page</h2></div>

    <div id="navigation"><span id="link-back" onclick="goBack();">Back</span></div>

    <div id="msg"></div>

    <div>
        <div><span id="result1">localStorage output</span></div>
        <button id="btn11">localStorage test</button>
        <button id="btn12">localStorage clear</button>
    </div>
    <div style="height: 20px"></div>
    <div>
        <div><span id="result2">sessionStorage output</span></div>
        <button id="btn21">sessionStorage test</button>
        <button id="btn22">sessionStorage clear</button>
    </div>

</div>

    <script type="text/javascript">

        //---------------------------------------------------------------------------------

        function init_localStorage(){
            if(typeof(Storage)!=="undefined")
            {
                if (localStorage.clickcount)
                {
                    document.getElementById("result1").innerHTML=" 你已经点击了按钮 " + localStorage.clickcount + " 次 ";
                }
            }
        }

        function clickCounter_localStorage()
        {
            if(typeof(Storage)!=="undefined")
            {
                if (localStorage.clickcount)
                {
                    localStorage.clickcount=Number(localStorage.clickcount)+1;
                }
                else
                {
                    localStorage.clickcount=1;
                }
                document.getElementById("result1").innerHTML=" 你已经点击了按钮 " + localStorage.clickcount + " 次 ";
            }
            else
            {
                document.getElementById("result1").innerHTML="对不起，您的浏览器不支持 web 存储。";
            }
        }

        function storageClear_localStorage(){
            localStorage.clear();
            document.getElementById("result1").innerHTML="localStorage存储已清空";
        }

        document.getElementById("btn11").onclick=function(){
            clickCounter_localStorage();
        };

        document.getElementById("btn12").onclick=function(){
            storageClear_localStorage();
        };

        //---------------------------------------------------------------------------------

        function init__sessionStorage(){
            if(typeof(Storage)!=="undefined")
            {
                if (sessionStorage.clickcount)
                {
                    document.getElementById("result2").innerHTML=" 你已经点击了按钮 " + sessionStorage.clickcount + " 次 ";
                }
            }
        }

        function clickCounter_sessionStorage()
        {
            if(typeof(Storage)!=="undefined")
            {
                if (sessionStorage.clickcount)
                {
                    sessionStorage.clickcount=Number(sessionStorage.clickcount)+1;
                }
                else
                {
                    sessionStorage.clickcount=1;
                }
                document.getElementById("result2").innerHTML=" 你已经点击了按钮 " + sessionStorage.clickcount + " 次 ";
            }
            else
            {
                document.getElementById("result2").innerHTML="对不起，您的浏览器不支持 web 存储。";
            }
        }

        function storageClear_sessionStorage(){
            sessionStorage.clear();
            document.getElementById("result2").innerHTML="sessionStorage存储已清空";
        }

        document.getElementById("btn21").onclick=function(){
            clickCounter_sessionStorage();
        };

        document.getElementById("btn22").onclick=function(){
            storageClear_sessionStorage();
        };

        //---------------------------------------------------------------------------------

        (function(){
            init_localStorage();
            init__sessionStorage();
        })();

    </script>

</body>

</html>
